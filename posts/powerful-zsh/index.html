<!doctype html>
<html lang="zh-cmn-Hans" class="han-init">
  <head>
    <meta charset="utf-8">
    <title>编程青年 - 强大的 shell - zsh</title>
    <meta name="description" content="编程青年的博客，记录着软件开发中的点点滴滴">
    <meta name="copyright" content="Ma Lucheng 2014-2015">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link href="/css/app.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/highlight.js/8.9.1/styles/solarized_light.min.css" rel="stylesheet">
  </head>

  <body class="container">
    <header class="global-header row">
      <h1 class="global-header__logo four columns"><a href="/" class="blog-title-link">编程青年</a></h1>
      <nav id="menu1" class="navbar eight columns">
        <ul class="navbar-list">
          
            <li class="navbar-item">
              <a href="/posts/" class="navbar-link" target='_self'>posts</a>
            </li>
          
            <li class="navbar-item">
              <a href="/essays/" class="navbar-link" target='_self'>essays</a>
            </li>
          
            <li class="navbar-item">
              <a href="/reading/" class="navbar-link" target='_self'>reading</a>
            </li>
          
            <li class="navbar-item">
              <a href="http://songofcode.com/how-to-learn-emacs-chinese-edition/" class="navbar-link" target='_blank'>emacs</a>
            </li>
          
            <li class="navbar-item">
              <a href="/about/" class="navbar-link" target='_self'>about</a>
            </li>
          
            <li class="navbar-item">
              <a href="https://github.com/teddy-ma/" class="navbar-link" target='_blank'>github</a>
            </li>
          
        </ul>
      </nav>
      <nav id="menu2" class="path-nav path-nav-top-right">
        <a href="#menu2" class="path-nav-expander">
          <div class="ball"></div>
        </a>
        <a href="#" class="path-nav-close"></a>
        <ul>
          
            <li>
              <a href="/posts/" target='_self'>posts</a>
            </li>
          
            <li>
              <a href="/essays/" target='_self'>essays</a>
            </li>
          
            <li>
              <a href="/reading/" target='_self'>reading</a>
            </li>
          
            <li>
              <a href="http://songofcode.com/how-to-learn-emacs-chinese-edition/" target='_blank'>emacs</a>
            </li>
          
            <li>
              <a href="/about/" target='_self'>about</a>
            </li>
          
            <li>
              <a href="https://github.com/teddy-ma/" target='_blank'>github</a>
            </li>
          
        </ul>
      </nav>
    </header>

    <main id="baseline" role="main" class="page-main typo yue row">
      <div class="section typeset twelve columns">
        <!-- 文章视图 -->
<article>
  <h1 id="强大的-shell---zsh">强大的 shell - zsh</h1>
<p>正如 ruby on rails 之于 ruby，oh-my-zsh 这款插件把 zsh 这个 shell 带进了我们的视线。</p>
<p>和 ruby 的遭遇类似，如果不是 oh-my-zsh 的爆红，我可能也不会知道世界上还有 zsh 这个东西。</p>
<p>和 ruby 一样，虽然以前比较小众，但并不影响它的强大。本文就要用 ruby off rails 的风格来 介绍一下原生的 zsh。</p>
<h2 id="安装">安装</h2>
<pre><code>brew install zsh
apt-get install zsh</code></pre>
<p>记得装好后要设置 zsh 为默认 shell。</p>
<pre><code>chsh -s $(which zsh)</code></pre>
<p><em>不少同学装完 oh-my-zsh 之后发现 shell 的样子和功能没任何变化，估计是根本不知道 oh-my-zsh 是一款 zsh 的插件。 因此需要你启动了 zsh 才能生效的。</em></p>
<p>配置文件方面不多说了，和 bash 基本一致，只要把 bashrc，bash_login 之类的文件改成对应的 zshrc, zsh_login 就行了。</p>
<h2 id="配置">配置</h2>
<p>前面说了，本文讨论的是原生的 zsh，你可能觉得离开了 <code>oh-my-zsh</code> 这样的强大插件就像 ruby 没有了 rails 就不能开发大型 web 应用一样。</p>
<p>别怕，跟着我做，你立刻就会变得有自信了。</p>
<pre><code>echo &quot;autoload -U promptinit&quot; &gt; ~/.zshrc</code></pre>
<p>然后新建一个 shell tab，输入 <code>promptinit</code>, 接着再输入 <code>prompt -p</code>.</p>
<p>怎么样，这些主题够漂亮吧，挑一个喜欢的主题的名字, 输入 <code>prompt THEME_NAME</code> 就可以应用主题了。</p>
<p>想要永久生效，写入下面的配置到 <code>.zshrc</code> 就行了：</p>
<pre><code>autoload -U promptinit
promptinit
prompt adam2</code></pre>
<p>当然你可以在主题的基础上进行修改，比如修改 PS1 的值等等，这些和其他 shell 都是类似的，就不介绍了。</p>
<p>这样一来是不是觉得要实现 oh-my-zsh 那样的效果也不难了。</p>
<h2 id="line-editor">line editor</h2>
<p>zsh 的 line editor (简称ZLE) 与 bash 是不同的，后者依赖的是 <code>readline</code>, 而 ZLE 是 zsh 自带的模块。</p>
<p>ZLE 默认的按键绑定是 emacs 风格的（此处应有掌声）。你以为所谓的按键绑定仅仅是移动，kill，yank 等常见特性吗?</p>
<p>图样, 试试按下你的 <code>meta+x</code>，怎么样，没想到吧，ZLE 是支持 emacs 的 execute 的。</p>
<p>举个例子：你要为你的新项目写一个 README 文件，于是你输入 <code>touch readme</code>，这时你发现需要大写 readme,</p>
<p>你只要：</p>
<ol type="1">
<li>按下 <code>meta+b</code> 把光标移动到 readme 前面</li>
<li>按下 <code>meta+x</code>, 然后输入 up-case 再 tab, 就会补全 up-case-word 命令</li>
<li>敲下回车，你的 readme 就变成 README 了</li>
</ol>
<p>ZLE 还有很多特性，比如按下 <code>meta+enter</code> 就能实现传统 <code>\</code> 表示的折行功能等。</p>
<h2 id="自动补全">自动补全</h2>
<p>没有谁在敲 shell 命令的时候是一个一个字老老实实敲下来的吧，没有补全的 shell 没人会去用的。</p>
<p>zsh 的自动补全功能是非常强大的，想要启用的，类似于上面提到的提示符设置，写入下面的配置到 <code>.zshrc</code> 就行了：</p>
<pre><code>autoload -U compinit
compinit</code></pre>
<p>zsh 可以补全文件，变量，参数等。</p>
<h2 id="插件管理">插件管理</h2>
<p>我觉得 oh-my-zsh 有点太重了，这里我推荐 <a href="https://github.com/zsh-users/antigen">antigen</a></p>
<blockquote>
<p>Antigen is to zsh, what Vundle is to vim.</p>
</blockquote>
<p>使用 antigen 可以轻松的管理各类 zsh 插件，包括 oh-my-zsh。</p>
<h2 id="总结">总结</h2>
<p>可以看到，zsh 只需几行配置，就比 bash 要强上不少。不愧为 『终极 shell』的称号。</p>

</article>

      </div>
    </main> <!-- 网页主体 -->

    <!-- 评论框 -->

    <footer role="contentinfo" class="global-footer row">
      <p class="copyright">© Ma Lucheng 2014-2015 — All content is licensed under the
        <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons BY-SA 3.0</a>.
      </p>

      <figure class="footer-zfm">
        <img src="http://javaer.qiniudn.com/zhifuma.png" alt="支付宝二维码" />
        <figcaption>觉得文章对你有帮助，可以打赏一杯咖啡支持一下</figcaption>
      </figure>
    </footer><!-- 页脚 -->

    <script src="/js/vendor.js"></script>
    <script src="/js/app.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/8.9.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>require('main').init();</script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-68587267-1', 'auto');
      ga('send', 'pageview');
    </script>

    <script src="//cdn.bootcss.com/instantclick/3.0.1/instantclick.min.js"></script>
    <script>
      InstantClick.on('change', function() {
        var blocks = document.querySelectorAll('pre code');
        for (var i = 0; i < blocks.length; i++) {
          hljs.highlightBlock(blocks[i]);
        }
      });
    </script>

    <script type="text/javascript" src=""></script>
  </body>
</html>
