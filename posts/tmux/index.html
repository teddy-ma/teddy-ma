<!doctype html> <html lang=zh-CN> <head> <title>Teddy Ma's Homepage | </title> <meta content="IE=edge" http-equiv=X-UA-Compatible> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name=viewport> <meta name=author content="Teddy Ma"> <meta name=description content="Teddy Ma's Personal Website"> <meta name=keywords content="programming, software engineer, code"> <link rel=stylesheet href="https://www.songofcode.com/socss/assets/toolkit/styles/toolkit.css"/> <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> <script>
window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'MP5K7';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
    g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[];
    o=n.createElement(t);o.async=1;o.crossOrigin='anonymous';o.src='https://'+_fs_host+'/s/fs.js';
    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
    g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)};
    g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
    g.log = function(a,b) { g("log", [a,b]) };
    g.consent=function(a){g("consent",!arguments.length||a)};
    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
    g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
</script> <link href="/assets/stylesheets/highlightjs/a11y-light-3f5cde8e.css" rel=stylesheet /> </head> <body class="posts posts_tmux posts_tmux_index typo"> <article> <h1>Tmux Crash Course</h1> <p>If you are still using multiple terminal&#8217;s tab to manage your shells, this post may give you a new point of view.</p> <p>The power of Tmux are following:</p> <ul> <li>connect local or remote sessions</li> <li>powerful management of windows and panes</li> <li>move windows between difference sessions</li> <li>automate script</li> </ul> <p><img src="assets/images/tmux-arch-f7c5393d.png" alt="assets/images/tmux-arch-f7c5393d.png"/></p> <h2>Config files</h2> <p>Like most dotfiles, the config file of Tmux local in <code>$HOME/.tmux.conf</code> with a global one in <code>/etc/tmux.conf</code>.</p> <h3>Prefix</h3> <p>First things first, prefix is the base of all the shortcuts, once the prefix is set, system knows that the following operation should be sent to to tmux.</p> <p>the default prefix key is <code>C-b</code>, which conflict with emacs default keybinding, so you can set prefix as &#8216;C-a=like most user. Of course=C-t` is another popular choice.</p> <p>Here are some config about prefix:</p> <pre class=src lang=conf>
set -g prefix C-a # setting the prefix
unbind C-b  # cancel the default prefix
set -s escape-time 1 # setting the escape time of prefix
bind C-a send-prefix # make sure C-a can be sent in other applications (like vim)
</pre> <h3>Common Operations</h3> <p>I will list my config in next sections. You may find that the description is longer than the config file since many shortcuts are the default ones so there is no need to define them explicitly.</p> <p>Feel free to use <code>prefix - ?</code> whenever you want to lookup the shortcuts list</p> <h4>Session</h4> <p>config：</p> <pre class=src lang=conf>
bind C-c new-session # create new session
bind C-f command-prompt -p find-session 'switch-client -t %%' # find session
</pre> <table> <tr><th>function</th><th>shortcut</th></tr> <tr><td>new session</td><td>prefix - C-c</td></tr> <tr><td>return session</td><td>tmux attach -t session-name</td></tr> <tr><td>list sessions</td><td>tmux list-sessions</td></tr> <tr><td>find session</td><td>prefix - C-f</td></tr> <tr><td>rename session</td><td>tmux rename-seesion session-name</td></tr> <tr><td>switch session</td><td>tmux switch -t session-name</td></tr> </table> <h4>Window</h4> <p>config：</p> <pre class=src lang=conf>
bind -r C-h previous-window # choose previous window
bind -r C-l next-window     # choose previous window
</pre> <table> <tr><th>functions</th><th>shortcut</th></tr> <tr><td>new window</td><td><code>prefix-c</code></td></tr> <tr><td>close window</td><td><code>prefix-&amp;</code></td></tr> <tr><td>rename window</td><td>=prefix-,=</td></tr> <tr><td>list windows</td><td><code>prefix-w</code></td></tr> <tr><td>switch window</td><td><code>prefix-[0-9]</code></td></tr> </table> <h4>Panel</h4> <p>config：</p> <pre class=src lang=conf>
bind - splitw -v
bind | splitw -h
</pre> <table> <tr><th>function</th><th>shortcut</th></tr> <tr><td>horizontal split window</td><td>prefix - ǀ</td></tr> <tr><td>vertical split window</td><td>prefix - -</td></tr> <tr><td>maximum pane</td><td>prefix-z</td></tr> <tr><td>change pane layout</td><td>prefix-space</td></tr> <tr><td>resize pane</td><td>prefix and hold (shift)FBNP</td></tr> <tr><td>switch pane in turn</td><td>prefix - o</td></tr> <tr><td>switch pane by no</td><td>prefix - q with no</td></tr> </table> <h2>Mode</h2> <p>Like vim, tmux has it&#8217;s own modes.</p> <h3>default mode</h3> <p>Once you enter Tmux, you are in default mode.</p> <h3>copy mode</h3> <p>use <code>prefix-[</code> to enter copy mode。In this mode you can lookup history, copy and past text just like the normal mode of vi.</p> <h3>command mode</h3> <p>Directly invoke command just like press <code>M-x</code> in emacs.</p> <h3>clock mode</h3> <p>This mode will show a clock. To be honest, I do not find this mode any helpful.</p> <h2>Advanced tips and plugins</h2> <h3>Pair Programming</h3> <p>Did you ever feeling it&#8217;s too crowded if two programmers head are behind one monitor? Tmux to the rescue. Start a server, and every programmer use a client to connect to the server, not only share a screen, but also share same file if the file is on server.</p> <p>Since it&#8217;s a common patten, there&#8217;s already a tool named <a href="https://github.com/zolrath/wemux">wemux</a>, which support modes such as mirror, pair, rogue even with the ability of kicking.</p> <h3>Initial workspaces</h3> <p>Thinking about a project which needs a redis server with two ports, a sidekiq process besides common server such as mysql, es and guard, that&#8217;s horrible.</p> <p>Thanks to <a href="https://github.com/tmuxinator/tmuxinator">tmuxinator</a> which is a ruby gem making initialing these servers very easy. It can also automate opening text editor, prepare extra windows for git or other tools and so on.</p> <h2>plugin manager and theme customize</h2> <p>The plugin system of tmux is very simple. You can install <a href="https://github.com/tmux-plugins/tpm">tpm</a> to getting started. You can also checkout this <a href="https://github.com/jimeh/tmux-themepack">repo</a> which listing many tmux themes.</p> </article> <script src="/assets/javascripts/all-70879c36.js"></script> <script src="/assets/javascripts/highlight-e7667caa.js"></script> <script>hljs.initHighlightingOnLoad()</script> <div id=github-comments></div> <script src="/assets/javascripts/comment-ddc93c2f.js" id=github-comment data-ssl=true data-theme=green data-username=teddy-ma data-repo="teddy-ma.github.io" data-page-id="posts/tmux"></script> </body> </html>